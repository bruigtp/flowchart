<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>flowchart • flowchart</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="flowchart">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">flowchart</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.5.1.90003</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/flowchart.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/bruigtp/flowchart/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>flowchart</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/bruigtp/flowchart/blob/main/vignettes/flowchart.Rmd" class="external-link"><code>vignettes/flowchart.Rmd</code></a></small>
      <div class="d-none name"><code>flowchart.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p><code>flowchart</code> is a package for drawing participant flow
diagrams directly from a dataframe using tidyverse. It provides a set of
functions that can be combined with <code>|&gt;</code> to create all
kinds of flowcharts from a dataframe in an easy way:</p>
<ul>
<li><p><code><a href="../reference/as_fc.html">as_fc()</a></code> transforms a dataframe into a
<code>fc</code> object that can be manipulated by the package.</p></li>
<li><p><code><a href="../reference/fc_split.html">fc_split()</a></code> splits a flowchart according to the
different values of a column in the dataframe.</p></li>
<li><p><code><a href="../reference/fc_filter.html">fc_filter()</a></code> creates a filtered box from the
flowchart, based on the evaluation of an expression in the
dataframe.</p></li>
<li><p><code><a href="../reference/fc_merge.html">fc_merge()</a></code> combines horizontally two different
flowcharts.</p></li>
<li><p><code><a href="../reference/fc_stack.html">fc_stack()</a></code> combines vertically two different
flowcharts.</p></li>
<li><p><code><a href="../reference/fc_modify.html">fc_modify()</a></code> allows to modify the parameters of the
flowchart which are stored in <code>.$fc</code>.</p></li>
<li><p><code><a href="../reference/fc_draw.html">fc_draw()</a></code> draws the flowchart created by the
previous functions.</p></li>
<li><p><code><a href="../reference/fc_export.html">fc_export()</a></code> allows to export the flowchart drawn to
the desired format.</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>We can install the stable version in CRAN:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"flowchart"</span><span class="op">)</span></span></code></pre></div>
<p>Or the development version from GitHub:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("remotes")</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">'bruigtp/flowchart'</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="safo-dataset">safo dataset<a class="anchor" aria-label="anchor" href="#safo-dataset"></a>
</h2>
<p>We will use the built-in dataset <code>safo</code>, which is a
randomly generated dataset from the SAFO trial<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;Grillo, S., Pujol, M., Miró, J.M. et al. Cloxacillin
plus fosfomycin versus cloxacillin alone for methicillin-susceptible
Staphylococcus aureus bacteremia: a randomized trial. Nat Med 29,
2518–2525 (2023). &lt;a href="https://doi.org/10.1038/s41591-023-02569-0" class="external-link uri"&gt;https://doi.org/10.1038/s41591-023-02569-0&lt;/a&gt;&lt;/p&gt;'><sup>1</sup></a>. SAFO is an
open-label, multicentre, phase III–IV superiority randomised clinical
trial designed to assess whether cloxacillin plus fosfomycin
administered during the first 7 days of therapy achieves better
treatment outcomes than cloxacillin alone in hospitalised patients with
meticillin-sensitive Staphylococcus aureus bacteraemia.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://bruigtp.github.io/flowchart/">flowchart</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">safo</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">safo</span><span class="op">)</span> </span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 6 × 21</span></span></span>
<span><span class="co">##      id inclusion_crit exclusion_crit chronic_heart_failure expected_death_24h</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>             </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span>     1 Yes            No             No                    No                </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span>     2 No             No             No                    No                </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span>     3 No             No             No                    No                </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span>     4 No             Yes            No                    No                </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">5</span>     5 No             No             No                    No                </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">6</span>     6 No             Yes            No                    No                </span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 16 more variables: polymicrobial_bacteremia &lt;fct&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   conditions_affect_adhrence &lt;fct&gt;, susp_prosthetic_valve_endocard &lt;fct&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   severe_liver_cirrhosis &lt;fct&gt;, acute_sars_cov2 &lt;fct&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   blactam_fosfomycin_hypersens &lt;fct&gt;, other_clinical_trial &lt;fct&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   pregnancy_or_breastfeeding &lt;fct&gt;, previous_participation &lt;fct&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   myasthenia_gravis &lt;fct&gt;, decline_part &lt;fct&gt;, group &lt;fct&gt;, itt &lt;fct&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   reason_itt &lt;fct&gt;, pp &lt;fct&gt;, reason_pp &lt;fct&gt;</span></span></span></code></pre>
</div>
<div class="section level2">
<h2 id="basic-operations">Basic operations<a class="anchor" aria-label="anchor" href="#basic-operations"></a>
</h2>
<p>The first step is to initialise the flowchart with
<code>as_fc</code>. The last step, if we want to visualise the created
flowchart, is to draw the flowchart with <code>fc_draw</code>. In
between we can combine the functions <code>fc_split</code>.,
<code>fc_filter</code>, <code>fc_merge</code>, <code>fc_stack</code>
with the operator pipe (<code>|&gt;</code> or <code>%&gt;$</code>) to
create complex flowchart structures.</p>
<div class="section level3">
<h3 id="initialize">Initialize<a class="anchor" aria-label="anchor" href="#initialize"></a>
</h3>
<p>To initialize a flowchart from a dataset we have to use the
<code><a href="../reference/as_fc.html">as_fc()</a></code> function:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">safo_fc</span> <span class="op">&lt;-</span> <span class="va">safo</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/as_fc.html">as_fc</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">safo_fc</span>, max.level <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## List of 2</span></span>
<span><span class="co">##  $ data: tibble [925 × 21] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">##  $ fc  : tibble [1 × 17] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">##  - attr(*, "class")= chr "fc"</span></span></code></pre>
<p>The <code>safo_fc</code> object created is a <code>fc</code> object,
which consists of a list containing the tibble of the dataframe
associated with the flowchart and the tibble that stores the flowchart
parameters. In this example, <code>safo_fc$data</code> corresponds to
the <code>safo</code> dataset while <code>safo_fc$fc</code> contains the
parameters of the initial flowchart:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">safo_fc</span><span class="op">$</span><span class="va">fc</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 1 × 17</span></span></span>
<span><span class="co">##      id     x     y     n     N perc  text  type  group just  text_color text_fs</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span>     1   0.5   0.5   925   925 100   <span style="color: #949494;">"</span>Ini… init  <span style="color: #BB0000;">NA</span>    cent… black            8</span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 5 more variables: text_fface &lt;dbl&gt;, text_ffamily &lt;lgl&gt;, text_padding &lt;dbl&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   bg_fill &lt;chr&gt;, border_color &lt;chr&gt;</span></span></span></code></pre>
<p>Alternatively, if a dataframe is not available, we can initialize a
flowchart using the <code>N =</code> argument manually specifying the
number of rows:</p>
</div>
<div class="section level3">
<h3 id="draw">Draw<a class="anchor" aria-label="anchor" href="#draw"></a>
</h3>
<p>The function <code><a href="../reference/fc_draw.html">fc_draw()</a></code> allows to draw the flowchart
associated to any <code>fc</code> object. Following the last example, we
can draw the initial flowchart that has been previously created:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">safo_fc</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/fc_draw.html">fc_draw</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="flowchart_files/figure-html/unnamed-chunk-8-1.png" width="700"></p>
</div>
<div class="section level3">
<h3 id="filter">Filter<a class="anchor" aria-label="anchor" href="#filter"></a>
</h3>
<p>We can filter the flowchart using <code><a href="../reference/fc_filter.html">fc_filter()</a></code> specifying
the logic in which the filter is to be applied. For example, we can show
the number of patients that were randomized in the study:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">safo</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/as_fc.html">as_fc</a></span><span class="op">(</span>label <span class="op">=</span> <span class="st">"Patients assessed for eligibility"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/fc_filter.html">fc_filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">group</span><span class="op">)</span>, label <span class="op">=</span> <span class="st">"Randomized"</span>, show_exc <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/fc_draw.html">fc_draw</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="flowchart_files/figure-html/unnamed-chunk-9-1.png" width="576"></p>
<p>Percentages are calculated from the box in the previous level. See
‘Modify function arguments’ for more information on the
<code>label=</code> and <code>show_exc=</code> arguments.</p>
<p>Alternatively, if the column to filter is not available, we can use
the <code>N =</code> argument to manually specify the number of rows of
the resulting filter:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">safo</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/as_fc.html">as_fc</a></span><span class="op">(</span>label <span class="op">=</span> <span class="st">"Patients assessed for eligibility"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/fc_filter.html">fc_filter</a></span><span class="op">(</span>N <span class="op">=</span> <span class="fl">215</span>, label <span class="op">=</span> <span class="st">"Randomized"</span>, show_exc <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/fc_draw.html">fc_draw</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="flowchart_files/figure-html/unnamed-chunk-10-1.png" width="576"></p>
</div>
<div class="section level3">
<h3 id="split">Split<a class="anchor" aria-label="anchor" href="#split"></a>
</h3>
<p>We can split the flowchart into groups using <code><a href="../reference/fc_split.html">fc_split()</a></code>
specifying the grouping variable. The function will split the flowchart
into as many categories as the specified variable has. For example, we
can split the previous flowchart showing the patients allocated in the
two study treatments:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">safo</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">group</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/as_fc.html">as_fc</a></span><span class="op">(</span>label <span class="op">=</span> <span class="st">"Randomized patients"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/fc_split.html">fc_split</a></span><span class="op">(</span><span class="va">group</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/fc_draw.html">fc_draw</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="flowchart_files/figure-html/unnamed-chunk-11-1.png" width="576"></p>
<p>Percentages are calculated from the box in the previous level.</p>
<p>Alternatively, if the column to split is not available, we can use
the <code>N =</code> argument to manually specify the number of rows in
each group of the resulting split:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">safo</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">group</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/as_fc.html">as_fc</a></span><span class="op">(</span>label <span class="op">=</span> <span class="st">"Randomized patients"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/fc_split.html">fc_split</a></span><span class="op">(</span>N <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">105</span>, <span class="fl">110</span><span class="op">)</span>, label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cloxacillin plus fosfomycin"</span>, <span class="st">"cloxacillin alone"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/fc_draw.html">fc_draw</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="flowchart_files/figure-html/unnamed-chunk-12-1.png" width="576"></p>
</div>
</div>
<div class="section level2">
<h2 id="customize-output">Customize output<a class="anchor" aria-label="anchor" href="#customize-output"></a>
</h2>
<p>We can customize the flowchart either with the arguments provided by
each function in the process of creating it, or directly in the final
output using the function <code>fc_modify</code>. We can also change the
box style for all boxes in the flowchart using an argument in
<code>fc_draw</code>.</p>
<div class="section level3">
<h3 id="change-function-arguments">Change function arguments<a class="anchor" aria-label="anchor" href="#change-function-arguments"></a>
</h3>
<p>Arguments common to <code><a href="../reference/as_fc.html">as_fc()</a></code>, <code><a href="../reference/fc_filter.html">fc_filter()</a></code>
and <code><a href="../reference/fc_split.html">fc_split()</a></code>, to customise the appearance of the boxes
created at each step:</p>
<table class="table">
<thead><tr>
<th style="text-align:left;">
Argument
</th>
<th style="text-align:left;">
Description
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
<code>N=</code>
</td>
<td style="text-align:left;">
manually specify the numbers to display in the boxes.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>label=</code>
</td>
<td style="text-align:left;">
modify the label.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>text_pattern=</code>
</td>
<td style="text-align:left;">
modify the pattern of the text.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>just=</code>
</td>
<td style="text-align:left;">
modify the justification for the text.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>text_color=</code>
</td>
<td style="text-align:left;">
modify the color of the text.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>text_fs=</code>
</td>
<td style="text-align:left;">
modify the font size of the text.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>text_fface=</code>
</td>
<td style="text-align:left;">
modify the font face of the text.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>text_ffamily=</code>
</td>
<td style="text-align:left;">
modify the font family of the text.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>text_padding=</code>
</td>
<td style="text-align:left;">
modify the padding of the text inside the box.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>bg_fill=</code>
</td>
<td style="text-align:left;">
modify the background color of the box.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>border_color=</code>
</td>
<td style="text-align:left;">
modify the border color of the box.
</td>
</tr>
</tbody>
</table>
<p><code><a href="../reference/as_fc.html">as_fc()</a></code> arguments:</p>
<table class="table">
<thead><tr>
<th style="text-align:left;">
Argument
</th>
<th style="text-align:left;">
Description
</th>
</tr></thead>
<tbody><tr>
<td style="text-align:left;">
<code>hide=</code>
</td>
<td style="text-align:left;">
hide the first initial box created by this function.
</td>
</tr></tbody>
</table>
<p><code><a href="../reference/fc_filter.html">fc_filter()</a></code> arguments:</p>
<table class="table">
<thead><tr>
<th style="text-align:left;">
Argument
</th>
<th style="text-align:left;">
Description
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
<code>perc_total=</code>
</td>
<td style="text-align:left;">
calculate percentages using the total number of rows at the beginning of
the flowchart.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>sel_group=</code>
</td>
<td style="text-align:left;">
apply the filter only in the specified groups (if data is grouped).
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>round_digits=</code>
</td>
<td style="text-align:left;">
modify the number of digits to round percentages.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>show_exc=</code>
</td>
<td style="text-align:left;">
show the box with the excluded rows that do not match the filter.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>direction_exc=</code>
</td>
<td style="text-align:left;">
change the direction of the exclusion box (left or right).
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>label_exc=</code>
</td>
<td style="text-align:left;">
modify the label of the exclusion box.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>text_pattern_exc=</code>
</td>
<td style="text-align:left;">
modify the pattern of the exclusion box.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>just_exc=</code>
</td>
<td style="text-align:left;">
modify the justification for the text of the exclusion box.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>text_color_exc=</code>
</td>
<td style="text-align:left;">
modify the color of the text in the exclusion box.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>text_fs_exc=</code>
</td>
<td style="text-align:left;">
modify the font size of the text in the exclusion box.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>text_fface_exc=</code>
</td>
<td style="text-align:left;">
modify the font face of the text in the exclusion box.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>text_ffamily_exc=</code>
</td>
<td style="text-align:left;">
modify the font family of the text in the exclusion box.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>text_padding_exc=</code>
</td>
<td style="text-align:left;">
modify the padding of the text inside the exclusion box.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>bg_fill_exc=</code>
</td>
<td style="text-align:left;">
modify the background color of the exclusion box.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>border_color_exc=</code>
</td>
<td style="text-align:left;">
modify the border color of the exclusion box.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>offset_exc=</code>
</td>
<td style="text-align:left;">
add space to the distance between the box and the excluded box (in the
x-coordinate).
</td>
</tr>
</tbody>
</table>
<p><code><a href="../reference/fc_split.html">fc_split()</a></code> arguments:</p>
<table class="table">
<thead><tr>
<th style="text-align:left;">
Argument
</th>
<th style="text-align:left;">
Description
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
<code>perc_total=</code>
</td>
<td style="text-align:left;">
calculate percentages using the total number of rows at the beginning of
the flowchart.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>sel_group=</code>
</td>
<td style="text-align:left;">
split the flowchart only in the specified groups (if data is grouped).
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>na.rm=</code>
</td>
<td style="text-align:left;">
omit the missing values in the grouping variable.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>show_zero=</code>
</td>
<td style="text-align:left;">
omit the levels of the grouping variable that don’t have data.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>round_digits=</code>
</td>
<td style="text-align:left;">
modify the number of digits to round percentages.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>title=</code>
</td>
<td style="text-align:left;">
add a title box to the split.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>text_color_title=</code>
</td>
<td style="text-align:left;">
modify the color of the text in the title box.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>text_fs_title=</code>
</td>
<td style="text-align:left;">
modify the font size of the text in the title box.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>text_fface_title=</code>
</td>
<td style="text-align:left;">
modify the font face of the text in the title box.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>text_ffamily_title=</code>
</td>
<td style="text-align:left;">
modify the font family of the text in the title box.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>text_padding_title=</code>
</td>
<td style="text-align:left;">
modify the padding of the text in the title box.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>bg_fill_title=</code>
</td>
<td style="text-align:left;">
modify the background color of the title box.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>border_color_title=</code>
</td>
<td style="text-align:left;">
modify the border color of the title box.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>offset=</code>
</td>
<td style="text-align:left;">
add space to the distance between the boxes (in the x-coordinate).
</td>
</tr>
</tbody>
</table>
<p><code><a href="../reference/fc_draw.html">fc_draw()</a></code> arguments are heredited from
<code>arrow</code>:</p>
<table class="table">
<thead><tr>
<th style="text-align:left;">
Argument
</th>
<th style="text-align:left;">
Description
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
<code>box_corners=</code>
</td>
<td style="text-align:left;">
specify corner type for all flowchart boxes.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>arrow_angle=</code>
</td>
<td style="text-align:left;">
angle of the arrow head in degrees.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>arrow_length=</code>
</td>
<td style="text-align:left;">
unit specifying the length of the arrow head.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>arrow_ends=</code>
</td>
<td style="text-align:left;">
specify the ends of the line to draw the arrow head (last/first/both).
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>arrow_type=</code>
</td>
<td style="text-align:left;">
whether the arrow head should be a closed triangle.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>title=</code>
</td>
<td style="text-align:left;">
title of the flowchart.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>title_x=</code>
</td>
<td style="text-align:left;">
x coordinate of the title.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>title_y=</code>
</td>
<td style="text-align:left;">
y coordinate of the title.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>title_color=</code>
</td>
<td style="text-align:left;">
color of the title.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>title_fs=</code>
</td>
<td style="text-align:left;">
font size of the title.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>title_fface=</code>
</td>
<td style="text-align:left;">
font face of the title.
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>title_ffamily=</code>
</td>
<td style="text-align:left;">
font family of the title.
</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="function-to-customize-the-flowchart">Function to customize the flowchart<a class="anchor" aria-label="anchor" href="#function-to-customize-the-flowchart"></a>
</h3>
<p>The function <code>fc_modify</code> allows the user to customise the
created flowchart by modifying its parameters, which are stored in
<code>.$fc</code>.</p>
<p>For example, let’s customize the following flowchart:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span> <span class="va">safo_fc</span> <span class="op">&lt;-</span> <span class="va">safo</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/as_fc.html">as_fc</a></span><span class="op">(</span>label <span class="op">=</span> <span class="st">"Patients assessed for eligibility"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/fc_filter.html">fc_filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">group</span><span class="op">)</span>, label <span class="op">=</span> <span class="st">"Randomized"</span>, show_exc <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> </span>
<span></span>
<span><span class="va">safo_fc</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/fc_draw.html">fc_draw</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="flowchart_files/figure-html/unnamed-chunk-13-1.png" width="576"></p>
<p>Previous to modifying it, we can use the function
<code><a href="../reference/fc_view.html">fc_view()</a></code> to inspect the element <code>$fc</code> that we
want to change:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">safo_fc</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/fc_view.html">fc_view</a></span><span class="op">(</span><span class="st">"fc"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 3 × 17</span></span></span>
<span><span class="co">##      id     x     y     n     N perc  text  type  group just  text_color text_fs</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span>     1  0.5  0.667   925   925 100   <span style="color: #949494;">"</span>Pat… init  <span style="color: #BB0000;">NA</span>    cent… black            8</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span>     2  0.5  0.333   215   925 23.24 <span style="color: #949494;">"</span>Ran… filt… <span style="color: #BB0000;">NA</span>    cent… black            8</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span>     3  0.65 0.5     710   925 76.76 <span style="color: #949494;">"</span>Exc… excl… <span style="color: #BB0000;">NA</span>    cent… black            6</span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 5 more variables: text_fface &lt;dbl&gt;, text_ffamily &lt;lgl&gt;, text_padding &lt;dbl&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   bg_fill &lt;chr&gt;, border_color &lt;chr&gt;</span></span></span></code></pre>
<p>Let’s customise the text in the exclusion box (<code>id = 3</code>)
to specify different reasons for exclusion, and change the <em>x</em>
and <em>y</em> coordinate:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">safo_fc</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/fc_modify.html">fc_modify</a></span><span class="op">(</span></span>
<span>    <span class="op">~</span> <span class="va">.</span> <span class="op">|&gt;</span> </span>
<span>      <span class="fu">mutate</span><span class="op">(</span></span>
<span>        text <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">id</span> <span class="op">==</span> <span class="fl">3</span>, <span class="fu">str_glue</span><span class="op">(</span><span class="st">"- {sum(safo$inclusion_crit == 'Yes')} not met the inclusion criteria\n- {sum(safo$exclusion_crit == 'Yes')} met the exclusion criteria"</span><span class="op">)</span>, <span class="va">text</span><span class="op">)</span>,</span>
<span>        x <span class="op">=</span> <span class="fu">case_when</span><span class="op">(</span></span>
<span>          <span class="va">id</span> <span class="op">==</span> <span class="fl">3</span> <span class="op">~</span> <span class="fl">0.75</span>,</span>
<span>          <span class="cn">TRUE</span> <span class="op">~</span> <span class="va">x</span></span>
<span>        <span class="op">)</span>,</span>
<span>        y <span class="op">=</span> <span class="fu">case_when</span><span class="op">(</span></span>
<span>          <span class="va">id</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">~</span> <span class="fl">0.8</span>,</span>
<span>          <span class="va">id</span> <span class="op">==</span> <span class="fl">2</span> <span class="op">~</span> <span class="fl">0.2</span>,</span>
<span>          <span class="cn">TRUE</span> <span class="op">~</span> <span class="va">y</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/fc_draw.html">fc_draw</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="flowchart_files/figure-html/unnamed-chunk-15-1.png" width="672"></p>
</div>
</div>
<div class="section level2">
<h2 id="combine">Combine<a class="anchor" aria-label="anchor" href="#combine"></a>
</h2>
<p><code><a href="../reference/fc_merge.html">fc_merge()</a></code> and <code><a href="../reference/fc_stack.html">fc_stack()</a></code> allow you to
combine different flowcharts horizontally or vertically. This is very
useful when you need to combine flowcharts generated from different
dataframes, as shown here.</p>
<div class="section level3">
<h3 id="merge">Merge<a class="anchor" aria-label="anchor" href="#merge"></a>
</h3>
<p>We can combine different flowcharts horizontally using
<code><a href="../reference/fc_merge.html">fc_merge()</a></code>. For example, we might want to represent the
flow of patients included in the ITT population with the flow of
patients included in the PP population.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create first flowchart for ITT</span></span>
<span><span class="va">fc1</span> <span class="op">&lt;-</span> <span class="va">safo</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/as_fc.html">as_fc</a></span><span class="op">(</span>label <span class="op">=</span> <span class="st">"Patients assessed for eligibility"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/fc_filter.html">fc_filter</a></span><span class="op">(</span><span class="va">itt</span> <span class="op">==</span> <span class="st">"Yes"</span>, label <span class="op">=</span> <span class="st">"Intention to treat (ITT)"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/fc_draw.html">fc_draw</a></span><span class="op">(</span><span class="va">fc1</span><span class="op">)</span></span></code></pre></div>
<p><img src="flowchart_files/figure-html/unnamed-chunk-16-1.png" width="768"></p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create second flowchart for visits</span></span>
<span><span class="va">fc2</span> <span class="op">&lt;-</span> <span class="va">safo</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/as_fc.html">as_fc</a></span><span class="op">(</span>label <span class="op">=</span> <span class="st">"Patients assessed for eligibility"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/fc_filter.html">fc_filter</a></span><span class="op">(</span><span class="va">pp</span> <span class="op">==</span> <span class="st">"Yes"</span>, label <span class="op">=</span> <span class="st">"Per protocol (PP)"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/fc_draw.html">fc_draw</a></span><span class="op">(</span><span class="va">fc2</span><span class="op">)</span></span></code></pre></div>
<p><img src="flowchart_files/figure-html/unnamed-chunk-16-2.png" width="768"></p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">fc1</span>, <span class="va">fc2</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/fc_merge.html">fc_merge</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/fc_draw.html">fc_draw</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="flowchart_files/figure-html/unnamed-chunk-16-3.png" width="768"></p>
</div>
<div class="section level3">
<h3 id="stack">Stack<a class="anchor" aria-label="anchor" href="#stack"></a>
</h3>
<p>We can combine different flowcharts vertically using
<code><a href="../reference/fc_stack.html">fc_stack()</a></code>. For example, we can combine the same two
flowcharts vertically instead of horizontally.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">fc1</span>, <span class="va">fc2</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/fc_stack.html">fc_stack</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/fc_draw.html">fc_draw</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="flowchart_files/figure-html/unnamed-chunk-17-1.png" width="576"></p>
<p>We can use the argument <code>unite = TRUE</code> to connect two
stacked flowcharts. For example:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fc1</span> <span class="op">&lt;-</span> <span class="va">fc1</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/fc_split.html">fc_split</a></span><span class="op">(</span><span class="va">group</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">fc1</span>, <span class="va">fc2</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/fc_stack.html">fc_stack</a></span><span class="op">(</span>unite <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/fc_draw.html">fc_draw</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="flowchart_files/figure-html/unnamed-chunk-18-1.png" width="576"></p>
</div>
</div>
<div class="section level2">
<h2 id="export">Export<a class="anchor" aria-label="anchor" href="#export"></a>
</h2>
<p>Once the flowchart has been drawn we can export it to the most
popular image formats, including both bitmap (png, jpeg, tiff, bmp) and
vector (svg, pdf) formats, using <code><a href="../reference/fc_export.html">fc_export()</a></code>:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">safo</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/as_fc.html">as_fc</a></span><span class="op">(</span>label <span class="op">=</span> <span class="st">"Patients assessed for eligibility"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/fc_filter.html">fc_filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">group</span><span class="op">)</span>, label <span class="op">=</span> <span class="st">"Randomized"</span>, show_exc <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/fc_draw.html">fc_draw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/fc_export.html">fc_export</a></span><span class="op">(</span><span class="st">"flowchart.png"</span><span class="op">)</span></span></code></pre></div>
<p>We can change the size and resolution of the stored image.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">safo</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/as_fc.html">as_fc</a></span><span class="op">(</span>label <span class="op">=</span> <span class="st">"Patients assessed for eligibility"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/fc_filter.html">fc_filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">group</span><span class="op">)</span>, label <span class="op">=</span> <span class="st">"Randomized"</span>, show_exc <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/fc_draw.html">fc_draw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/fc_export.html">fc_export</a></span><span class="op">(</span><span class="st">"flowchart.png"</span>, width <span class="op">=</span> <span class="fl">3000</span>, height <span class="op">=</span> <span class="fl">4000</span>, res <span class="op">=</span> <span class="fl">700</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a>
</h2>
<div class="section level3">
<h3 id="example-1">Example 1<a class="anchor" aria-label="anchor" href="#example-1"></a>
</h3>
<p>In this example, we will try to create a flowchart for the complete
flow of patients in the SAFO study:</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">safo</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/as_fc.html">as_fc</a></span><span class="op">(</span>label <span class="op">=</span> <span class="st">"Patients assessed for eligibility"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/fc_filter.html">fc_filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">group</span><span class="op">)</span>, label <span class="op">=</span> <span class="st">"Randomized"</span>, show_exc <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/fc_split.html">fc_split</a></span><span class="op">(</span><span class="va">group</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/fc_filter.html">fc_filter</a></span><span class="op">(</span><span class="va">itt</span> <span class="op">==</span> <span class="st">"Yes"</span>, label <span class="op">=</span> <span class="st">"Included in ITT"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/fc_filter.html">fc_filter</a></span><span class="op">(</span><span class="va">pp</span> <span class="op">==</span> <span class="st">"Yes"</span>, label <span class="op">=</span> <span class="st">"Included in PP"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/fc_draw.html">fc_draw</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="flowchart_files/figure-html/unnamed-chunk-21-1.png" width="672"></p>
</div>
<div class="section level3">
<h3 id="example-2">Example 2<a class="anchor" aria-label="anchor" href="#example-2"></a>
</h3>
<p>In this example, we will try to exactly reproduce the original
flowchart of the SAFO study published in Nature Medicine: <a href="https://www.nature.com/articles/s41591-023-02569-0/figures/1" class="external-link">SAFO
flowchart</a>.</p>
<p>First, we need to do some pre-processing to reproduce the text in the
larger boxes:</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create labels for exclusion box:</span></span>
<span><span class="va">label_exc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu">str_glue</span><span class="op">(</span><span class="st">"{sum(safo$inclusion_crit == 'Yes' | safo$exclusion_crit == 'Yes' | safo$decline_part == 'Yes', na.rm = T)} excluded:"</span><span class="op">)</span>,</span>
<span>    <span class="fu">map_chr</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"inclusion_crit"</span>, <span class="st">"decline_part"</span>, <span class="st">"exclusion_crit"</span><span class="op">)</span>, <span class="op">~</span><span class="fu">str_glue</span><span class="op">(</span><span class="st">"{sum(safo[[.x]] == 'Yes', na.rm = TRUE)} {attr(safo[[.x]], 'label')}"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    <span class="fu">map_chr</span><span class="op">(</span><span class="fl">4</span><span class="op">:</span><span class="fl">15</span>, <span class="op">~</span><span class="fu">str_glue</span><span class="op">(</span><span class="st">" -  {sum(safo[[.x]] == 'Yes')} {attr(safo[[.x]], 'label')}"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  collapse <span class="op">=</span> <span class="st">"\n"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">label_exc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">gsub</a></span><span class="op">(</span><span class="st">"exclusion criteria"</span>, <span class="st">"exclusion criteria:"</span>, <span class="va">label_exc</span><span class="op">)</span></span>
<span></span>
<span><span class="va">safo1</span> <span class="op">&lt;-</span> <span class="va">safo</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">group</span> <span class="op">==</span> <span class="st">"cloxacillin alone"</span>, <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">reason_pp</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>reason_pp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/droplevels.html" class="external-link">droplevels</a></span><span class="op">(</span><span class="va">reason_pp</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">label_exc1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu">str_glue</span><span class="op">(</span><span class="st">"{nrow(safo1)} excluded:"</span><span class="op">)</span>,</span>
<span>    <span class="fu">map_chr</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels</a></span><span class="op">(</span><span class="va">safo1</span><span class="op">$</span><span class="va">reason_pp</span><span class="op">)</span>, <span class="op">~</span><span class="fu">str_glue</span><span class="op">(</span><span class="st">" -  {sum(safo1$reason_pp == .x)} {.x}"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  collapse <span class="op">=</span> <span class="st">"\n"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">label_exc1</span> <span class="op">&lt;-</span> <span class="fu">str_replace_all</span><span class="op">(</span><span class="va">label_exc1</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"resistant"</span> <span class="op">=</span> <span class="st">"resistant\n"</span>, <span class="st">"blood"</span> <span class="op">=</span> <span class="st">"blood\n"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">safo2</span> <span class="op">&lt;-</span> <span class="va">safo</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">group</span> <span class="op">==</span> <span class="st">"cloxacillin plus fosfomycin"</span>, <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">reason_pp</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>reason_pp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/droplevels.html" class="external-link">droplevels</a></span><span class="op">(</span><span class="va">reason_pp</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">label_exc2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu">str_glue</span><span class="op">(</span><span class="st">"{nrow(safo2)} excluded:"</span><span class="op">)</span>,</span>
<span>    <span class="fu">map_chr</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels</a></span><span class="op">(</span><span class="va">safo2</span><span class="op">$</span><span class="va">reason_pp</span><span class="op">)</span>, <span class="op">~</span><span class="fu">str_glue</span><span class="op">(</span><span class="st">" -  {sum(safo2$reason_pp == .x)} {.x}"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  collapse <span class="op">=</span> <span class="st">"\n"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">label_exc2</span> <span class="op">&lt;-</span> <span class="fu">str_replace_all</span><span class="op">(</span><span class="va">label_exc2</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"nosocomial"</span> <span class="op">=</span> <span class="st">"nosocomial\n"</span>, <span class="st">"treatment"</span> <span class="op">=</span> <span class="st">"treatment\n"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Second, let’s create and customise the flowchart using the functions
in the package:</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">safo</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/as_fc.html">as_fc</a></span><span class="op">(</span>label <span class="op">=</span> <span class="st">"patients assessed for eligibility"</span>, text_pattern <span class="op">=</span> <span class="st">"{n} {label}"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/fc_filter.html">fc_filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">group</span><span class="op">)</span>, label <span class="op">=</span> <span class="st">"randomized"</span>, text_pattern <span class="op">=</span> <span class="st">"{n} {label}"</span>, show_exc <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>            just_exc <span class="op">=</span> <span class="st">"left"</span>, text_pattern_exc <span class="op">=</span> <span class="st">"{label}"</span>, label_exc <span class="op">=</span> <span class="va">label_exc</span>, text_fs_exc <span class="op">=</span> <span class="fl">7</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/fc_split.html">fc_split</a></span><span class="op">(</span><span class="va">group</span>, text_pattern <span class="op">=</span> <span class="st">"{n} asssigned\n {label}"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/fc_filter.html">fc_filter</a></span><span class="op">(</span><span class="va">itt</span> <span class="op">==</span> <span class="st">"Yes"</span>, label <span class="op">=</span> <span class="st">"included in intention-to-treat\n population"</span>, show_exc <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>            text_pattern <span class="op">=</span> <span class="st">"{n} {label}"</span>, </span>
<span>            label_exc <span class="op">=</span> <span class="st">"patient did not receive allocated\n treatment (withdrew consent)"</span>, </span>
<span>            text_pattern_exc <span class="op">=</span> <span class="st">"{n} {label}"</span>, text_fs_exc <span class="op">=</span> <span class="fl">7</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/fc_filter.html">fc_filter</a></span><span class="op">(</span><span class="va">pp</span> <span class="op">==</span> <span class="st">"Yes"</span>, label <span class="op">=</span> <span class="st">"included in per-protocol\n population"</span>, show_exc <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>            just_exc <span class="op">=</span> <span class="st">"left"</span>, text_pattern <span class="op">=</span> <span class="st">"{n} {label}"</span>, text_fs_exc <span class="op">=</span> <span class="fl">7</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/fc_modify.html">fc_modify</a></span><span class="op">(</span></span>
<span>    <span class="op">~</span><span class="va">.x</span> <span class="op">|&gt;</span> </span>
<span>      <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">n</span> <span class="op">!=</span> <span class="fl">0</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>      <span class="fu">mutate</span><span class="op">(</span></span>
<span>        text <span class="op">=</span> <span class="fu">case_when</span><span class="op">(</span><span class="va">id</span> <span class="op">==</span> <span class="fl">11</span> <span class="op">~</span> <span class="va">label_exc1</span>, <span class="va">id</span> <span class="op">==</span> <span class="fl">13</span> <span class="op">~</span> <span class="va">label_exc2</span>, <span class="cn">TRUE</span> <span class="op">~</span> <span class="va">text</span><span class="op">)</span>,</span>
<span>        x <span class="op">=</span> <span class="fu">case_when</span><span class="op">(</span><span class="va">id</span> <span class="op">==</span> <span class="fl">3</span> <span class="op">~</span> <span class="va">x</span> <span class="op">+</span> <span class="fl">0.15</span>, <span class="va">id</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">11</span>, <span class="fl">13</span><span class="op">)</span> <span class="op">~</span> <span class="va">x</span> <span class="op">+</span> <span class="fl">0.01</span>, <span class="cn">TRUE</span> <span class="op">~</span> <span class="va">x</span><span class="op">)</span>,</span>
<span>        y <span class="op">=</span> <span class="fu">case_when</span><span class="op">(</span><span class="va">id</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span><span class="op">)</span> <span class="op">~</span> <span class="va">y</span> <span class="op">+</span> <span class="fl">0.05</span>, <span class="va">id</span> <span class="op">&gt;=</span> <span class="fl">2</span> <span class="op">~</span> <span class="va">y</span> <span class="op">-</span> <span class="fl">0.05</span>, <span class="cn">TRUE</span> <span class="op">~</span> <span class="va">y</span><span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/fc_draw.html">fc_draw</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="flowchart_files/figure-html/unnamed-chunk-23-1.png" width="1248"></p>
</div>
<div class="section level3">
<h3 id="example-3">Example 3<a class="anchor" aria-label="anchor" href="#example-3"></a>
</h3>
<p>In this example, we will create a flowchart without any dataframe,
using the <code>N =</code> argument to manually specify the numbers to
display in the boxes:</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/as_fc.html">as_fc</a></span><span class="op">(</span>N <span class="op">=</span> <span class="fl">300</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/fc_filter.html">fc_filter</a></span><span class="op">(</span>N <span class="op">=</span> <span class="fl">240</span>, label <span class="op">=</span> <span class="st">"Randomized patients"</span>, show_exc <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/fc_split.html">fc_split</a></span><span class="op">(</span>N <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">80</span>, <span class="fl">60</span><span class="op">)</span>, label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Group A"</span>, <span class="st">"Group B"</span>, <span class="st">"Group C"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/fc_filter.html">fc_filter</a></span><span class="op">(</span>N <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">80</span>, <span class="fl">75</span>, <span class="fl">50</span><span class="op">)</span>, label <span class="op">=</span> <span class="st">"Finished the study"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/fc_draw.html">fc_draw</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="flowchart_files/figure-html/unnamed-chunk-24-1.png" width="672"></p>
</div>
<div class="section level3">
<h3 id="customization-examples">Customization examples<a class="anchor" aria-label="anchor" href="#customization-examples"></a>
</h3>
<p>In this examples, we will explore some of the arguments to customize
the following flowchart:</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">safo</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/as_fc.html">as_fc</a></span><span class="op">(</span>label <span class="op">=</span> <span class="st">"Patients assessed for eligibility"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/fc_filter.html">fc_filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">group</span><span class="op">)</span>, label <span class="op">=</span> <span class="st">"Randomized"</span>, show_exc <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/fc_split.html">fc_split</a></span><span class="op">(</span><span class="va">group</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/fc_draw.html">fc_draw</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="flowchart_files/figure-html/unnamed-chunk-25-1.png" width="576"></p>
<div class="section level4">
<h4 id="add-a-title-to-the-flowchart">Add a title to the flowchart<a class="anchor" aria-label="anchor" href="#add-a-title-to-the-flowchart"></a>
</h4>
<p>We can add a title to the flowchart using the argument
<code>title=</code> in the <code><a href="../reference/fc_draw.html">fc_draw()</a></code> function:</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">safo</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/as_fc.html">as_fc</a></span><span class="op">(</span>label <span class="op">=</span> <span class="st">"Patients assessed for eligibility"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/fc_filter.html">fc_filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">group</span><span class="op">)</span>, label <span class="op">=</span> <span class="st">"Randomized"</span>, show_exc <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/fc_split.html">fc_split</a></span><span class="op">(</span><span class="va">group</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/fc_draw.html">fc_draw</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"SAFO flowchart"</span><span class="op">)</span></span></code></pre></div>
<p><img src="flowchart_files/figure-html/unnamed-chunk-26-1.png" width="576"></p>
</div>
<div class="section level4">
<h4 id="add-a-title-to-the-split">Add a title to the split<a class="anchor" aria-label="anchor" href="#add-a-title-to-the-split"></a>
</h4>
<p>We can also add a title to a split in the flowchart, using the
argument <code>title</code> in the <code><a href="../reference/fc_split.html">fc_split()</a></code> function:</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">safo</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/as_fc.html">as_fc</a></span><span class="op">(</span>label <span class="op">=</span> <span class="st">"Patients assessed for eligibility"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/fc_filter.html">fc_filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">group</span><span class="op">)</span>, label <span class="op">=</span> <span class="st">"Randomized"</span>, show_exc <span class="op">=</span> <span class="cn">TRUE</span>, perc_total <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/fc_split.html">fc_split</a></span><span class="op">(</span><span class="va">group</span>, perc_total <span class="op">=</span> <span class="cn">TRUE</span>, title <span class="op">=</span> <span class="st">"Treatment"</span>, bg_fill_title <span class="op">=</span> <span class="st">"skyblue"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/fc_draw.html">fc_draw</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="flowchart_files/figure-html/unnamed-chunk-27-1.png" width="576"></p>
</div>
<div class="section level4">
<h4 id="percentage-with-respect-to-the-total-rows">Percentage with respect to the total rows<a class="anchor" aria-label="anchor" href="#percentage-with-respect-to-the-total-rows"></a>
</h4>
<p>We can change the calculation of all percentages in a flowchart. By
default, percentages are calculated with respect to the box in the
previous level. With the argument <code>perc_total=</code> we can change
it, to calculate it with respect to the initial box with the total
number of rows:</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">safo</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/as_fc.html">as_fc</a></span><span class="op">(</span>label <span class="op">=</span> <span class="st">"Patients assessed for eligibility"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/fc_filter.html">fc_filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">group</span><span class="op">)</span>, label <span class="op">=</span> <span class="st">"Randomized"</span>, show_exc <span class="op">=</span> <span class="cn">TRUE</span>, perc_total <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/fc_split.html">fc_split</a></span><span class="op">(</span><span class="va">group</span>, perc_total <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/fc_draw.html">fc_draw</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="flowchart_files/figure-html/unnamed-chunk-28-1.png" width="576"></p>
</div>
<div class="section level4">
<h4 id="offset">Offset<a class="anchor" aria-label="anchor" href="#offset"></a>
</h4>
<p>We can add/remove space to the distance between boxes in a split
using the argument <code>offset</code>:</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">safo</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/as_fc.html">as_fc</a></span><span class="op">(</span>label <span class="op">=</span> <span class="st">"Patients assessed for eligibility"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/fc_filter.html">fc_filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">group</span><span class="op">)</span>, label <span class="op">=</span> <span class="st">"Randomized"</span>, show_exc <span class="op">=</span> <span class="cn">TRUE</span>, perc_total <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/fc_split.html">fc_split</a></span><span class="op">(</span><span class="va">group</span>, offset <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/fc_draw.html">fc_draw</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="flowchart_files/figure-html/unnamed-chunk-29-1.png" width="576"></p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">safo</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/as_fc.html">as_fc</a></span><span class="op">(</span>label <span class="op">=</span> <span class="st">"Patients assessed for eligibility"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/fc_filter.html">fc_filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">group</span><span class="op">)</span>, label <span class="op">=</span> <span class="st">"Randomized"</span>, show_exc <span class="op">=</span> <span class="cn">TRUE</span>, perc_total <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/fc_split.html">fc_split</a></span><span class="op">(</span><span class="va">group</span>, offset <span class="op">=</span> <span class="op">-</span><span class="fl">0.1</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/fc_draw.html">fc_draw</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="flowchart_files/figure-html/unnamed-chunk-29-2.png" width="576"></p>
<p>We can also add/remove space to the distance between the excluded box
in a filter using the argument <code>offset_exc</code>:</p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">safo</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/as_fc.html">as_fc</a></span><span class="op">(</span>label <span class="op">=</span> <span class="st">"Patients assessed for eligibility"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/fc_filter.html">fc_filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">group</span><span class="op">)</span>, label <span class="op">=</span> <span class="st">"Randomized"</span>, show_exc <span class="op">=</span> <span class="cn">TRUE</span>, offset_exc <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/fc_split.html">fc_split</a></span><span class="op">(</span><span class="va">group</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/fc_draw.html">fc_draw</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="flowchart_files/figure-html/unnamed-chunk-30-1.png" width="576"></p>
</div>
<div class="section level4">
<h4 id="change-box-corner-style">Change Box Corner Style<a class="anchor" aria-label="anchor" href="#change-box-corner-style"></a>
</h4>
<p>We can change the corner style of the flowchart boxes using the
<code>box_corners</code> argument with <code>fc_draw</code>:</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">safo</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/as_fc.html">as_fc</a></span><span class="op">(</span>label <span class="op">=</span> <span class="st">"Patients assessed for eligibility"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/fc_filter.html">fc_filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">group</span><span class="op">)</span>, label <span class="op">=</span> <span class="st">"Randomized"</span>, show_exc <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/fc_split.html">fc_split</a></span><span class="op">(</span><span class="va">group</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/fc_draw.html">fc_draw</a></span><span class="op">(</span>box_corners <span class="op">=</span> <span class="st">"sharp"</span><span class="op">)</span></span></code></pre></div>
<p><img src="flowchart_files/figure-html/unnamed-chunk-31-1.png" width="576"></p>
</div>
<div class="section level4">
<h4 id="split-in-one-group">Split in one group<a class="anchor" aria-label="anchor" href="#split-in-one-group"></a>
</h4>
<p>We can perform an additional split only in one of the groups using
the argument <code>sel_group</code>:</p>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">safo</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/as_fc.html">as_fc</a></span><span class="op">(</span>label <span class="op">=</span> <span class="st">"Patients assessed for eligibility"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/fc_filter.html">fc_filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">group</span><span class="op">)</span>, label <span class="op">=</span> <span class="st">"Randomized"</span>, show_exc <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/fc_split.html">fc_split</a></span><span class="op">(</span><span class="va">group</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/fc_split.html">fc_split</a></span><span class="op">(</span>N <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">50</span>, <span class="fl">60</span><span class="op">)</span>, sel_group <span class="op">=</span> <span class="st">"cloxacillin alone"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/fc_draw.html">fc_draw</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="flowchart_files/figure-html/unnamed-chunk-32-1.png" width="576"></p>
</div>
</div>
</div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Pau Satorra, João Carmezim, Natàlia Pallarès, Cristian Tebé.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
